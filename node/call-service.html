<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Call Service | node-red-contrib-home-assistant-websocket</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="icon" href="/node-red-contrib-home-assistant-websocket/favicon.ico">
    <meta name="description" content="Node-RED integration with Home Assistant through the WebSocket and HTTP API">
    <link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/css/0.styles.bc448156.css" as="style"><link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/js/app.7a73701e.js" as="script"><link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/js/2.9fbc6d8b.js" as="script"><link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/js/34.1e8169dc.js" as="script"><link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/js/13.f20857a6.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/10.b0159de7.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/11.7ae66727.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/12.a47e06b8.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/14.2a39f272.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/15.b41525d9.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/16.301d2a46.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/17.298169bc.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/18.0ed3db0d.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/19.0cff1f15.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/20.d9d5fd19.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/21.f4310275.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/22.c1fb2faa.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/23.2521c321.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/24.c96929b4.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/25.23e2fb7d.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/26.0b0f328a.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/27.607ed4b3.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/28.80de2da2.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/29.b6801a53.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/3.90bac8e8.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/30.7ebafad5.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/31.1e0047fc.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/32.523c54a8.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/33.02250f46.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/35.1dc76b6d.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/36.e1d2eb1d.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/37.cf3aefe3.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/38.c0afea51.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/39.4eb317c1.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/4.75b51733.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/40.93b4d780.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/41.919a326e.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/42.b3e7c55a.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/43.1be2e68d.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/44.44c06a36.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/45.a99c10f1.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/46.1f7b0d3b.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/47.e32cec55.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/48.9adf448d.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/49.8537a9a7.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/5.d82717ed.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/6.cbaedf9b.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/7.a5d12f95.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/8.dcd713d7.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/9.269487f3.js">
    <link rel="stylesheet" href="/node-red-contrib-home-assistant-websocket/assets/css/0.styles.bc448156.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/node-red-contrib-home-assistant-websocket/" class="home-link router-link-active"><!----> <span class="site-name">node-red-contrib-home-assistant-websocket</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/guide/" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/node/" class="nav-link router-link-active">
  Nodes
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/FAQ.html" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/cookbook/" class="nav-link">
  Cookbook
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/scrubber/" class="nav-link">
  Scrubber
</a></div> <a href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/guide/" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/node/" class="nav-link router-link-active">
  Nodes
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/FAQ.html" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/cookbook/" class="nav-link">
  Cookbook
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/scrubber/" class="nav-link">
  Scrubber
</a></div> <a href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Nodes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/node-red-contrib-home-assistant-websocket/node/API.html" class="sidebar-link">API</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html" aria-current="page" class="active sidebar-link">Call Service</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#configuration" class="sidebar-link">Configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#domain" class="sidebar-link">Domain</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#service" class="sidebar-link">Service</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#entity-id" class="sidebar-link">Entity Id</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#data" class="sidebar-link">Data</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#merge-context" class="sidebar-link">Merge Context</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#alternative-template-tags" class="sidebar-link">Alternative Template Tags</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#output-location" class="sidebar-link">Output Location</a></li></ul></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#input" class="sidebar-link">Input</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#domain-2" class="sidebar-link">domain</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#service-2" class="sidebar-link">service</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#data-2" class="sidebar-link">data</a></li></ul></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#output" class="sidebar-link">Output</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#domain-3" class="sidebar-link">domain</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#service-3" class="sidebar-link">service</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#data-3" class="sidebar-link">data</a></li></ul></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html#changelog" class="sidebar-link">Changelog</a></li></ul></li><li><a href="/node-red-contrib-home-assistant-websocket/node/config-server.html" class="sidebar-link">Config Server</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/current-state.html" class="sidebar-link">Current State</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/entity.html" class="sidebar-link">Entity</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/events-all.html" class="sidebar-link">Events: all</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/events-state.html" class="sidebar-link">Events: state</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/fire-event.html" class="sidebar-link">Fire Event</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/get-entities.html" class="sidebar-link">Get Entities</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/get-history.html" class="sidebar-link">Get History</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/get-template.html" class="sidebar-link">Get Template</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/poll-state.html" class="sidebar-link">Poll State</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/trigger-state.html" class="sidebar-link">Trigger: state</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/wait-until.html" class="sidebar-link">Wait Until</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/webhook.html" class="sidebar-link">Webhook</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/zone.html" class="sidebar-link">Zone</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="call-service"><a href="#call-service" class="header-anchor">#</a> Call Service</h1> <p>Sends a request to home assistant for any domain and service available (<code>light/turn_on</code>, <code>input_select/select_option</code>, etc..)</p> <h2 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h2> <h3 id="domain"><a href="#domain" class="header-anchor">#</a> Domain <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>required</span></h3> <ul><li>Type: <code>string</code></li> <li>Accepts <a href="/node-red-contrib-home-assistant-websocket/guide/mustache-templates.html">Mustache Templates</a></li></ul> <p>Service domain to call</p> <h3 id="service"><a href="#service" class="header-anchor">#</a> Service <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>required</span></h3> <ul><li>Type: <code>string</code></li> <li>Accepts <a href="/node-red-contrib-home-assistant-websocket/guide/mustache-templates.html">Mustache Templates</a></li></ul> <p>Service service to call</p> <h3 id="entity-id"><a href="#entity-id" class="header-anchor">#</a> Entity Id</h3> <ul><li>Type: <code>string</code></li> <li>Accepts <a href="/node-red-contrib-home-assistant-websocket/guide/mustache-templates.html">Mustache Templates</a></li></ul> <p>A comma-delimited list of entity ids.</p> <div class="custom-block tip"><p class="custom-block-title">NOTICE</p> <p>If <code>entity_id</code> exists in the data property it will have precedence over this value.</p></div> <h3 id="data"><a href="#data" class="header-anchor">#</a> Data</h3> <ul><li>Type: <code>JSON</code></li> <li>Accepts <a href="/node-red-contrib-home-assistant-websocket/guide/mustache-templates.html">Mustache Templates</a> when data type is JSON</li></ul> <p>JSON object to pass along.</p> <h3 id="merge-context"><a href="#merge-context" class="header-anchor">#</a> Merge Context</h3> <ul><li>Type: <code>string</code></li></ul> <p>If defined will attempt to merge the global and flow context variable into the config</p> <h3 id="alternative-template-tags"><a href="#alternative-template-tags" class="header-anchor">#</a> Alternative Template Tags</h3> <ul><li>Type: <code>boolean</code></li></ul> <p>Will change the tags used for mustache template to <code>&lt;%</code> and <code>%&gt;</code></p> <h3 id="output-location"><a href="#output-location" class="header-anchor">#</a> Output Location</h3> <ul><li>Type: <code>string</code></li> <li>Default: <code>None</code></li></ul> <p>Customizable location for the output of the node.</p> <h2 id="input"><a href="#input" class="header-anchor">#</a> Input</h2> <p>All properties need to be under <code>msg.payload</code>.</p> <h4 id="merging"><a href="#merging" class="header-anchor">#</a> Merging</h4> <p>If the incoming message has a <code>payload</code> property with <code>domain</code>, <code>service</code> set it will override any config values if set.</p> <p>If the incoming message has a <code>payload.data</code> that is an object or parsable into an object these properties will be <strong>merged</strong> with any config values set.</p> <p>If the node has a property value in its config for <code>Merge Context</code> then the <code>flow</code> and <code>global</code> contexts will be checked for this property which should be an object that will also be merged into the data payload.</p> <h4 id="merge-resolution"><a href="#merge-resolution" class="header-anchor">#</a> Merge Resolution</h4> <p>As seen above the <code>data</code> property has a lot going on in the way of data merging, in the end, all of these are optional and the rightmost will win if a property exists in multiple objects</p> <p>Config Data, Global Data, Flow Data, Payload Data ( payload data property always
wins if provided</p> <h3 id="domain-2"><a href="#domain-2" class="header-anchor">#</a> domain</h3> <ul><li>Type: <code>string</code></li></ul> <p>Service domain to call</p> <h3 id="service-2"><a href="#service-2" class="header-anchor">#</a> service</h3> <ul><li>Type: <code>string</code></li></ul> <p>Service service to call</p> <h3 id="data-2"><a href="#data-2" class="header-anchor">#</a> data</h3> <ul><li>Type: <code>Object</code></li></ul> <p>Service data to send with API call</p> <h2 id="output"><a href="#output" class="header-anchor">#</a> Output</h2> <p>All properties will be under what is defined in <code>Output Location</code> in the config.</p> <h3 id="domain-3"><a href="#domain-3" class="header-anchor">#</a> domain</h3> <ul><li>Type: <code>string</code></li></ul> <p>Service <code>domain</code> service was called with</p> <h3 id="service-3"><a href="#service-3" class="header-anchor">#</a> service</h3> <ul><li>Type: <code>string</code></li></ul> <p>Service <code>service</code> was called with</p> <h3 id="data-3"><a href="#data-3" class="header-anchor">#</a> data</h3> <ul><li>Type: <code>Object</code></li></ul> <p>Service <code>data</code> used in a call, if one was used</p> <h4 id="example-of-output"><a href="#example-of-output" class="header-anchor">#</a> Example of output:</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;domain&quot;</span><span class="token operator">:</span> <span class="token string">&quot;light&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;service&quot;</span><span class="token operator">:</span> <span class="token string">&quot;turn_on&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;entity_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;light.kitchen&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="changelog"><a href="#changelog" class="header-anchor">#</a> Changelog</h2> <h4 id="version-1"><a href="#version-1" class="header-anchor">#</a> Version 1</h4> <ul><li>Entity ids are no longer merged with the data property on the front end</li> <li>The data field does not have to be valid JSON until after templates are rendered. This change will allow you to assign numbers to properties as an actual number and not a <code>string</code> using templates.</li> <li><code>entity_id</code> in the data property will supersede the entity id field</li> <li>Flows exported from version 0.14.0 will lose the entity id when imported into
a previous version</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket/edit/dev/docs/node/call-service.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/7/2020, 7:40:03 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/node-red-contrib-home-assistant-websocket/node/API.html" class="prev">
        API
      </a></span> <span class="next"><a href="/node-red-contrib-home-assistant-websocket/node/config-server.html">
        Config Server
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/node-red-contrib-home-assistant-websocket/assets/js/app.7a73701e.js" defer></script><script src="/node-red-contrib-home-assistant-websocket/assets/js/2.9fbc6d8b.js" defer></script><script src="/node-red-contrib-home-assistant-websocket/assets/js/34.1e8169dc.js" defer></script><script src="/node-red-contrib-home-assistant-websocket/assets/js/13.f20857a6.js" defer></script>
  </body>
</html>
